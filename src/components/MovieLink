import { useState } from 'react';

// Main App component
export default function App() {
  // Use state to manage the current view and the selected movie
  const [currentPage, setCurrentPage] = useState('home'); // 'home' or 'movie-details'
  const [selectedMovie, setSelectedMovie] = useState(null);

  // Hardcoded movie data with added description and trailer links
  const movies = [
    {
      id: 1,
      title: 'Dune: Part Two',
      posterURL: 'https://image.tmdb.org/t/p/w500/czP52i3gIuD4hB5B2H3mJ1t6T4b.jpg',
      rating: 8.3,
      description: 'Paul Atreides unites with Chani and the Fremen while seeking revenge against the conspirators who destroyed his family. Facing a choice between the love of his life and the fate of the known universe, he must prevent a terrible future only he can foresee.',
      trailerLink: 'https://www.youtube.com/embed/5U7R38g_w5A',
    },
    {
      id: 2,
      title: 'Godzilla x Kong: The New Empire',
      posterURL: 'https://image.tmdb.org/t/p/w500/k2tCgYlSj10fK05BqR8XkEwY9Xm.jpg',
      rating: 6.8,
      description: 'The epic battle continues! Legendary Pictures’ cinematic Monsterverse follows up the explosive showdown of “Godzilla vs. Kong” with an all-new adventure pitting the almighty Kong and the fearsome Godzilla against a colossal undiscovered threat hidden within our world, challenging their very existence—and our own.',
      trailerLink: 'https://www.youtube.com/embed/PbrjN1P3GfE',
    },
    {
      id: 3,
      title: 'Kung Fu Panda 4',
      posterURL: 'https://image.tmdb.org/t/p/w500/fR7mO75wMvB3vJ5s7L5Q2p9hE5q.jpg',
      rating: 7.2,
      description: 'After three death-defying adventures defeating world-class villains with his unmatched courage and mad martial arts skills, Po, the Dragon Warrior, is called upon by destiny to become the Spiritual Leader of the Valley of Peace.',
      trailerLink: 'https://www.youtube.com/embed/g2A501LqS9Y',
    },
    {
      id: 4,
      title: 'Ghostbusters: Frozen Empire',
      posterURL: 'https://image.tmdb.org/t/p/w500/x5ZgGg6ZtSg6hF7X5w8m42b2T0u.jpg',
      rating: 6.7,
      description: 'The Spengler family returns to where it all started—the iconic New York City firehouse—to team up with the original Ghostbusters, who have developed a top-secret research lab to take busting ghosts to the next level. But when the discovery of an ancient artifact unleashes an evil force, Ghostbusters new and old must join forces to protect their home and save the world from a second Ice Age.',
      trailerLink: 'https://www.youtube.com/embed/h0hE3B6-v-k',
    },
    {
      id: 5,
      title: 'Oppenheimer',
      posterURL: 'https://image.tmdb.org/t/p/w500/8G4X6sLhM3tT4sXv1jS4FkL33wE.jpg',
      rating: 8.4,
      description: 'The story of J. Robert Oppenheimer\'s role in the development of the atomic bomb during World War II.',
      trailerLink: 'https://www.youtube.com/embed/uGvV6aLzXjE',
    },
    {
      id: 6,
      title: 'Deadpool & Wolverine',
      posterURL: 'https://image.tmdb.org/t/p/w500/aHl2c5F4N53sA0G3x2f9jS5z2Nq.jpg',
      rating: 8.8,
      description: 'Wolverine, recovering from a recent surgery, is forced to team up with an unlikely ally to save the world from an ancient evil.',
      trailerLink: 'https://www.youtube.com/embed/WJ6959bH8eY',
    }
  ];

  // Function to handle the click on a movie card
  const handleMovieClick = (movie) => {
    setSelectedMovie(movie);
    setCurrentPage('movie-details');
  };

  // Function to navigate back to the home page
  const handleBackClick = () => {
    setSelectedMovie(null);
    setCurrentPage('home');
  };

  // The main return statement uses conditional rendering to show the correct view
  return (
    <div className="bg-gray-900 text-white min-h-screen p-8 font-sans">
      <script src="https://cdn.tailwindcss.com"></script>
      <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
      </style>
      <header className="mb-8 text-center">
        <h1 className="text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-orange-400">
          Movie App
        </h1>
      </header>

      {/* Conditional rendering for the Home page view */}
      {currentPage === 'home' && (
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          {movies.map((movie) => (
            <div
              key={movie.id}
              onClick={() => handleMovieClick(movie)}
              className="bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer"
            >
              <img
                src={movie.posterURL}
                alt={`${movie.title} poster`}
                className="w-full h-80 object-cover"
              />
              <div className="p-4">
                <h2 className="text-xl font-semibold mb-2">{movie.title}</h2>
                <div className="flex items-center">
                  <span className="text-yellow-400 mr-2">⭐</span>
                  <span className="text-gray-300">{movie.rating}</span>
                </div>
              </div>
            </div>
          ))}
        </div>
      )}

      {/* Conditional rendering for the Movie Details page view */}
      {currentPage === 'movie-details' && selectedMovie && (
        <div className="max-w-4xl mx-auto bg-gray-800 rounded-xl shadow-lg p-6">
          <button
            onClick={handleBackClick}
            className="mb-6 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-md transition duration-300 flex items-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              className="h-5 w-5 mr-2"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fillRule="evenodd"
                d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                clipRule="evenodd"
              />
            </svg>
            Back to Home
          </button>
          <div className="md:flex md:space-x-8">
            <img
              src={selectedMovie.posterURL}
              alt={`${selectedMovie.title} poster`}
              className="w-full md:w-1/3 rounded-lg object-cover mb-4 md:mb-0"
            />
            <div className="md:w-2/3">
              <h2 className="text-3xl font-bold text-red-400 mb-2">{selectedMovie.title}</h2>
              <div className="flex items-center text-lg mb-4">
                <span className="text-yellow-400 mr-2">⭐</span>
                <span className="text-gray-300">{selectedMovie.rating}</span>
              </div>
              <p className="text-gray-300 leading-relaxed mb-6">
                {selectedMovie.description}
              </p>
              <h3 className="text-2xl font-bold mb-4 text-red-400">Trailer</h3>
              <div className="aspect-w-16 aspect-h-9">
                <iframe
                  src={selectedMovie.trailerLink}
                  title={`${selectedMovie.title} Trailer`}
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowFullScreen
                  className="w-full h-80 rounded-lg shadow-lg"
                ></iframe>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

